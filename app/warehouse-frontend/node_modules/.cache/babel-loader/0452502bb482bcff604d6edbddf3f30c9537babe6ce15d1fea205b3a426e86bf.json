{"ast":null,"code":"var _jsxFileName = \"/data/vscode/HacatonAeroflot/Aeroflot-project/app/warehouse-frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE ? `${process.env.REACT_APP_API_BASE}/api` : 'http://localhost:8001/api';\n\n// Объект с описаниями ошибок\nconst ERROR_CODES = {\n  NETWORK_ERROR: {\n    code: 'ERR_001',\n    message: 'Сервер недоступен. Проверьте подключение к сети и запущен ли бэкенд-сервер.'\n  },\n  AUTH_ERROR: {\n    code: 'ERR_002',\n    message: 'Ошибка авторизации. Проверьте правильность badge_id и пароля.'\n  },\n  DETECTION_ERROR: {\n    code: 'ERR_003',\n    message: 'Ошибка распознавания инструментов. Сервис компьютерного зрения недоступен.'\n  },\n  OPERATION_START_ERROR: {\n    code: 'ERR_004',\n    message: 'Ошибка начала операции. Не удалось создать сессию для работы с инструментами.'\n  },\n  OPERATION_CONFIRM_ERROR: {\n    code: 'ERR_005',\n    message: 'Ошибка подтверждения операции. Не удалось сохранить данные операции.'\n  },\n  CAMERA_ERROR: {\n    code: 'ERR_006',\n    message: 'Ошибка доступа к камере. Разрешите доступ к камере в настройках браузера.'\n  }\n};\nfunction App() {\n  _s();\n  const [currentView, setCurrentView] = useState('login');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  useEffect(() => {\n    if (token) {\n      verifyToken();\n    }\n  }, [token]);\n  const verifyToken = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUser(response.data);\n      setCurrentView('main');\n    } catch (error) {\n      if (error.code === 'NETWORK_ERROR' || !error.response) {\n        showError(ERROR_CODES.NETWORK_ERROR);\n      } else {\n        localStorage.removeItem('token');\n        setToken(null);\n      }\n    }\n  };\n  const handleLogin = (userData, authToken) => {\n    setUser(userData);\n    setToken(authToken);\n    localStorage.setItem('token', authToken);\n    setCurrentView('main');\n  };\n  const handleLogout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('token');\n    setCurrentView('login');\n  };\n\n  // Функция для показа ошибок\n  const showError = errorInfo => {\n    alert(`Ошибка ${errorInfo.code}: ${errorInfo.message}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [currentView === 'login' && /*#__PURE__*/_jsxDEV(LoginView, {\n      onLogin: handleLogin,\n      showError: showError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), currentView === 'main' && user && /*#__PURE__*/_jsxDEV(MainView, {\n      user: user,\n      onLogout: handleLogout,\n      showError: showError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n// Компонент авторизации\n_s(App, \"D+8YZJafVh3K0dbJB92VR6zoqRY=\");\n_c = App;\nfunction LoginView({\n  onLogin,\n  showError\n}) {\n  _s2();\n  const [formData, setFormData] = useState({\n    badge_id: '',\n    password: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    try {\n      const response = await axios.post(`${API_BASE_URL}/auth/login`, formData);\n      onLogin(response.data.user, response.data.access_token);\n    } catch (error) {\n      var _error$response;\n      console.error('Login error:', error);\n      if (error.code === 'NETWORK_ERROR' || ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) >= 500) {\n        showError(ERROR_CODES.NETWORK_ERROR);\n        setError('Бэкенд недоступен. Проверьте подключение к серверу.');\n      } else {\n        showError(ERROR_CODES.AUTH_ERROR);\n        setError('Ошибка авторизации. Проверьте badge_id и пароль.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleQuickLogin = async badgeId => {\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/auth/login`, {\n        badge_id: badgeId,\n        password: badgeId === 'admin' ? 'admin' : 'password'\n      });\n      onLogin(response.data.user, response.data.access_token);\n    } catch (error) {\n      var _error$response2;\n      if (error.code === 'NETWORK_ERROR' || ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) >= 500) {\n        showError(ERROR_CODES.NETWORK_ERROR);\n      } else {\n        showError(ERROR_CODES.AUTH_ERROR);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Badge ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"badge_id\",\n            value: formData.badge_id,\n            onChange: handleChange,\n            required: true,\n            disabled: loading,\n            placeholder: \"demo \\u0438\\u043B\\u0438 admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            value: formData.password,\n            onChange: handleChange,\n            required: true,\n            disabled: loading,\n            placeholder: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          children: loading ? 'Вход...' : 'Войти'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-login-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            margin: '1rem 0',\n            color: '#666'\n          },\n          children: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439 \\u0432\\u0445\\u043E\\u0434:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuickLogin('demo'),\n          disabled: loading,\n          className: \"quick-login-btn demo-btn\",\n          children: \"\\u0414\\u0435\\u043C\\u043E \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuickLogin('admin'),\n          disabled: loading,\n          className: \"quick-login-btn admin-btn\",\n          children: \"\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"demo-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u2022 \\u0414\\u0435\\u043C\\u043E: badge_id = demo, \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C = password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u2022 \\u0410\\u0434\\u043C\\u0438\\u043D: badge_id = admin, \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C = admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n\n// Главный компонент работы с инструментами\n_s2(LoginView, \"gcBbRbooVlN0X1tEQGO+obRizEM=\");\n_c2 = LoginView;\nfunction MainView({\n  user,\n  onLogout,\n  showError\n}) {\n  _s3();\n  const [engineer, setEngineer] = useState('');\n  const [operationType, setOperationType] = useState('checkout');\n  const [operationDate, setOperationDate] = useState('');\n  const [tools, setTools] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [sessionId, setSessionId] = useState(null);\n  const [uploadedImage, setUploadedImage] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [isCameraOn, setIsCameraOn] = useState(false);\n  const [detectionResult, setDetectionResult] = useState(null);\n\n  // Устанавливаем текущую дату по умолчанию\n  useEffect(() => {\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);\n    setOperationDate(localDateTime);\n  }, []);\n\n  // Функция загрузки изображения\n  const handleImageUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Проверка типа файла\n    if (!file.type.match('image.*')) {\n      showError('Пожалуйста, выберите файл изображения (JPG, PNG, WebP)');\n      return;\n    }\n\n    // Проверка размера файла (максимум 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      showError('Размер файла не должен превышать 10MB');\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        // Проверяем валидность изображения\n        const img = new Image();\n        img.onload = () => {\n          const base64Data = e.target.result.split(',')[1];\n          setUploadedImage({\n            base64: base64Data,\n            preview: e.target.result,\n            width: img.width,\n            height: img.height\n          });\n          setDetectionResult(null); // Сбрасываем предыдущие результаты\n          console.log('Изображение успешно загружено:', {\n            width: img.width,\n            height: img.height,\n            size: file.size\n          });\n        };\n        img.onerror = () => {\n          throw new Error('Ошибка загрузки изображения');\n        };\n        img.src = e.target.result;\n      } catch (error) {\n        console.error('Ошибка обработки изображения:', error);\n        showError('Ошибка обработки изображения');\n      }\n    };\n    reader.onerror = () => {\n      showError('Ошибка чтения файла');\n    };\n    reader.readAsDataURL(file);\n  };\n\n  // Функция распознавания инструментов на изображении\n  const performDetection = async imageData => {\n    if (!imageData) {\n      showError('Сначала загрузите изображение');\n      return;\n    }\n    setLoading(true);\n    setDetectionResult(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/ml/detect`, {\n        image_base64: imageData.base64 || imageData,\n        confidence_threshold: 0.7\n      });\n      if (response.data.success) {\n        const detectedTools = response.data.results.detected_tools || [];\n        const toolsWithIds = detectedTools.map((tool, index) => ({\n          id: index,\n          class_name: tool.class_name,\n          confidence: tool.confidence,\n          detected_quantity: tool.detected_quantity,\n          manual_quantity: tool.detected_quantity || 1,\n          is_manual_edit: false\n        }));\n        setTools(toolsWithIds);\n        setDetectionResult({\n          success: true,\n          count: detectedTools.length,\n          message: `Успешно распознано ${detectedTools.length} инструментов`\n        });\n        showSuccess(`Обнаружено ${detectedTools.length} инструментов!`);\n      } else {\n        throw new Error('Распознавание не удалось');\n      }\n    } catch (error) {\n      console.error('Ошибка детекции:', error);\n      showError(ERROR_CODES.DETECTION_ERROR);\n      setTools([]);\n      setDetectionResult({\n        success: false,\n        count: 0,\n        message: 'Не удалось распознать инструменты на изображении'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Работа с камерой\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment'\n        },\n        audio: false\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await videoRef.current.play();\n        setIsCameraOn(true);\n      }\n    } catch (e) {\n      console.error('Camera error:', e);\n      showError(ERROR_CODES.CAMERA_ERROR);\n    }\n  };\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      const tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(t => t.stop());\n      videoRef.current.srcObject = null;\n      setIsCameraOn(false);\n    }\n  };\n  const capturePhoto = () => {\n    if (!videoRef.current) return;\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n    const dataUrl = canvas.toDataURL('image/jpeg');\n    const base64Data = dataUrl.split(',')[1];\n    setUploadedImage({\n      base64: base64Data,\n      preview: dataUrl,\n      width: canvas.width,\n      height: canvas.height\n    });\n    setDetectionResult(null);\n  };\n\n  // Функция очистки изображения\n  const clearImage = () => {\n    setUploadedImage(null);\n    setDetectionResult(null);\n    setTools([]);\n  };\n\n  // Функция начала операции\n  const startOperation = async () => {\n    if (!engineer.trim()) {\n      showError('Введите ФИО инженера');\n      return;\n    }\n    setLoading(true);\n    try {\n      const operationData = {\n        engineer_name: engineer,\n        operation_type: operationType,\n        operation_date: operationDate,\n        user_id: user.id\n      };\n      const token = localStorage.getItem('token');\n      const headers = token !== 'demo-jwt-token' ? {\n        Authorization: `Bearer ${token}`\n      } : {};\n      const response = await axios.post(`${API_BASE_URL}/operations/start`, operationData, {\n        headers\n      });\n      setSessionId(response.data.session_id);\n      showSuccess('Операция начата. Загрузите изображение с инструментами.');\n    } catch (error) {\n      console.error('Ошибка начала операции:', error);\n      showError(ERROR_CODES.OPERATION_START_ERROR);\n      setSessionId(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateToolQuantity = (index, newQuantity) => {\n    const updatedTools = [...tools];\n    updatedTools[index] = {\n      ...updatedTools[index],\n      manual_quantity: Math.max(0, newQuantity),\n      is_manual_edit: true\n    };\n    setTools(updatedTools);\n  };\n  const confirmOperation = async () => {\n    if (!sessionId) {\n      showError('Сначала начните операцию');\n      return;\n    }\n    if (tools.length === 0) {\n      showError('Добавьте хотя бы один инструмент');\n      return;\n    }\n    setLoading(true);\n    try {\n      const operationData = {\n        session_id: sessionId,\n        operation_date: operationDate,\n        tools: tools.map(tool => ({\n          tool_id: tool.id,\n          final_quantity: tool.manual_quantity,\n          was_manually_adjusted: tool.is_manual_edit\n        })),\n        image_base64: (uploadedImage === null || uploadedImage === void 0 ? void 0 : uploadedImage.base64) || null\n      };\n      const token = localStorage.getItem('token');\n      const headers = token !== 'demo-jwt-token' ? {\n        Authorization: `Bearer ${token}`\n      } : {};\n      const response = await axios.post(`${API_BASE_URL}/operations/confirm`, operationData, {\n        headers\n      });\n      alert(`Операция завершена! Обработано ${response.data.total_tools} инструментов`);\n      resetOperation();\n    } catch (error) {\n      console.error('Ошибка подтверждения операции:', error);\n      showError(ERROR_CODES.OPERATION_CONFIRM_ERROR);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetOperation = () => {\n    setEngineer('');\n    setTools([]);\n    setSessionId(null);\n    setUploadedImage(null);\n    setDetectionResult(null);\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);\n    setOperationDate(localDateTime);\n  };\n\n  // Вспомогательная функция для показа успешных сообщений\n  const showSuccess = message => {\n    alert(`✅ ${message}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0423\\u0447\\u0435\\u0442 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440: \", user.full_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), user.is_superuser && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"admin-badge\",\n          children: \"ADMIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"operation-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0424\\u0418\\u041E \\u0438\\u043D\\u0436\\u0435\\u043D\\u0435\\u0440\\u0430:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: engineer,\n            onChange: e => setEngineer(e.target.value),\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044E, \\u0438\\u043C\\u044F, \\u043E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0422\\u0438\\u043F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: operationType,\n            onChange: e => setOperationType(e.target.value),\n            disabled: loading,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"checkout\",\n              children: \"\\u0412\\u044B\\u0434\\u0430\\u0447\\u0430 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"checkin\",\n              children: \"\\u041F\\u0440\\u0438\\u0435\\u043C \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430 \\u0438 \\u0432\\u0440\\u0435\\u043C\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            value: operationDate,\n            onChange: e => setOperationDate(e.target.value),\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startOperation,\n            disabled: !engineer.trim() || loading,\n            className: \"scan-button\",\n            children: loading ? 'Подготовка...' : 'Начать операцию'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this), tools.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: confirmOperation,\n            disabled: loading,\n            className: \"confirm-button\",\n            children: loading ? 'Сохранение...' : 'Подтвердить операцию'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430 \\u0441 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\\u043C\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"camera-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"camera-controls\",\n              children: [!isCameraOn ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startCamera,\n                disabled: loading || !sessionId,\n                className: \"camera-button\",\n                children: \"\\uD83C\\uDFA5 \\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043A\\u0430\\u043C\\u0435\\u0440\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopCamera,\n                disabled: loading,\n                className: \"camera-button stop\",\n                children: \"\\uD83D\\uDED1 \\u0412\\u044B\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043A\\u0430\\u043C\\u0435\\u0440\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: capturePhoto,\n                disabled: !isCameraOn || loading,\n                className: \"capture-button\",\n                children: \"\\uD83D\\uDCF8 \\u0421\\u043D\\u0438\\u043C\\u043E\\u043A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"camera-preview\",\n              children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                ref: videoRef,\n                style: {\n                  width: '100%',\n                  maxWidth: 480,\n                  background: '#000'\n                },\n                muted: true,\n                playsInline: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n                ref: canvasRef,\n                style: {\n                  display: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-upload-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"image-upload\",\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleImageUpload,\n              style: {\n                display: 'none'\n              },\n              disabled: loading || !sessionId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"image-upload\",\n              className: \"upload-button\",\n              children: loading ? '⏳ Загрузка...' : '📁 Выбрать изображение'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C\\u044B\\u0435 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u044B: JPG, PNG, WebP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0440\\u0430\\u0437\\u043C\\u0435\\u0440: 10MB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 17\n              }, this), !sessionId && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"warning\",\n                children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043D\\u0430\\u0447\\u043D\\u0438\\u0442\\u0435 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this), uploadedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-preview-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => performDetection(uploadedImage),\n              disabled: loading,\n              className: \"detect-button\",\n              children: loading ? '🔍 Распознавание...' : '📸 Распознать инструменты'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: clearImage,\n              disabled: loading,\n              className: \"clear-button\",\n              children: \"\\u274C \\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }, this), uploadedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-preview-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: uploadedImage.preview,\n              alt: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u043E\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0434\\u043B\\u044F \\u0440\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u0432\\u0430\\u043D\\u0438\\u044F\",\n              className: \"preview-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-overlay\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"scan-frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0433\\u043E\\u0442\\u043E\\u0432\\u043E \\u043A \\u0440\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u0432\\u0430\\u043D\\u0438\\u044E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 13\n        }, this), detectionResult && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detection-result\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442 \\u0440\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u0432\\u0430\\u043D\\u0438\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432: \", detectionResult.count || 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 15\n          }, this), detectionResult.message && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `result-message ${detectionResult.success ? 'success' : 'error'}`,\n            children: detectionResult.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), tools.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tools-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tools-list\",\n          children: tools.map((tool, index) => /*#__PURE__*/_jsxDEV(ToolItem, {\n            tool: tool,\n            index: index,\n            onQuantityChange: updateToolQuantity,\n            operationType: operationType\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"operation-summary\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0418\\u0442\\u043E\\u0433\\u043E \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 18\n            }, this), \" \", tools.reduce((sum, tool) => sum + tool.manual_quantity, 0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 501,\n    columnNumber: 5\n  }, this);\n}\n\n// Компонент инструмента\n_s3(MainView, \"W8SXtrScYaRLYkAC4X3kPMqCpbA=\");\n_c3 = MainView;\nfunction ToolItem({\n  tool,\n  index,\n  onQuantityChange,\n  operationType\n}) {\n  _s4();\n  const [localQuantity, setLocalQuantity] = useState(tool.manual_quantity);\n  const handleQuantityChange = newQuantity => {\n    setLocalQuantity(newQuantity);\n    onQuantityChange(index, newQuantity);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `tool-item ${tool.is_manual_edit ? 'manual-edit' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tool-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tool-name\",\n        children: tool.class_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this), tool.confidence && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"confidence\",\n        children: [Math.round(tool.confidence * 100), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quantity-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleQuantityChange(localQuantity - 1),\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: localQuantity,\n        onChange: e => handleQuantityChange(parseInt(e.target.value) || 0),\n        min: \"0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleQuantityChange(localQuantity + 1),\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 693,\n    columnNumber: 5\n  }, this);\n}\n_s4(ToolItem, \"pmtMWu6NQMMDsG4BcDheOZ8pJm0=\");\n_c4 = ToolItem;\nexport default App;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"LoginView\");\n$RefreshReg$(_c3, \"MainView\");\n$RefreshReg$(_c4, \"ToolItem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_BASE","ERROR_CODES","NETWORK_ERROR","code","message","AUTH_ERROR","DETECTION_ERROR","OPERATION_START_ERROR","OPERATION_CONFIRM_ERROR","CAMERA_ERROR","App","_s","currentView","setCurrentView","user","setUser","token","setToken","localStorage","getItem","verifyToken","response","get","headers","Authorization","data","error","showError","removeItem","handleLogin","userData","authToken","setItem","handleLogout","errorInfo","alert","className","children","LoginView","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","MainView","onLogout","_c","_s2","formData","setFormData","badge_id","password","loading","setLoading","setError","handleSubmit","e","preventDefault","post","access_token","_error$response","console","status","handleChange","target","name","value","handleQuickLogin","badgeId","_error$response2","onSubmit","type","onChange","required","disabled","placeholder","style","textAlign","margin","color","onClick","_c2","_s3","engineer","setEngineer","operationType","setOperationType","operationDate","setOperationDate","tools","setTools","sessionId","setSessionId","uploadedImage","setUploadedImage","videoRef","canvasRef","isCameraOn","setIsCameraOn","detectionResult","setDetectionResult","now","Date","localDateTime","getTime","getTimezoneOffset","toISOString","slice","handleImageUpload","event","file","files","match","size","reader","FileReader","onload","img","Image","base64Data","result","split","base64","preview","width","height","log","onerror","Error","src","readAsDataURL","performDetection","imageData","image_base64","confidence_threshold","success","detectedTools","results","detected_tools","toolsWithIds","map","tool","index","id","class_name","confidence","detected_quantity","manual_quantity","is_manual_edit","count","length","showSuccess","startCamera","stream","navigator","mediaDevices","getUserMedia","video","facingMode","audio","current","srcObject","play","stopCamera","tracks","getTracks","forEach","t","stop","capturePhoto","canvas","videoWidth","videoHeight","ctx","getContext","drawImage","dataUrl","toDataURL","clearImage","startOperation","trim","operationData","engineer_name","operation_type","operation_date","user_id","session_id","updateToolQuantity","newQuantity","updatedTools","Math","max","confirmOperation","tool_id","final_quantity","was_manually_adjusted","total_tools","resetOperation","full_name","is_superuser","ref","maxWidth","background","muted","playsInline","display","accept","htmlFor","alt","ToolItem","onQuantityChange","reduce","sum","_c3","_s4","localQuantity","setLocalQuantity","handleQuantityChange","round","parseInt","min","_c4","$RefreshReg$"],"sources":["/data/vscode/HacatonAeroflot/Aeroflot-project/app/warehouse-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE ? `${process.env.REACT_APP_API_BASE}/api` : 'http://localhost:8001/api';\n\n// Объект с описаниями ошибок\nconst ERROR_CODES = {\n  NETWORK_ERROR: {\n    code: 'ERR_001',\n    message: 'Сервер недоступен. Проверьте подключение к сети и запущен ли бэкенд-сервер.'\n  },\n  AUTH_ERROR: {\n    code: 'ERR_002', \n    message: 'Ошибка авторизации. Проверьте правильность badge_id и пароля.'\n  },\n  DETECTION_ERROR: {\n    code: 'ERR_003',\n    message: 'Ошибка распознавания инструментов. Сервис компьютерного зрения недоступен.'\n  },\n  OPERATION_START_ERROR: {\n    code: 'ERR_004',\n    message: 'Ошибка начала операции. Не удалось создать сессию для работы с инструментами.'\n  },\n  OPERATION_CONFIRM_ERROR: {\n    code: 'ERR_005',\n    message: 'Ошибка подтверждения операции. Не удалось сохранить данные операции.'\n  },\n  CAMERA_ERROR: {\n    code: 'ERR_006',\n    message: 'Ошибка доступа к камере. Разрешите доступ к камере в настройках браузера.'\n  }\n};\n\nfunction App() {\n  const [currentView, setCurrentView] = useState('login');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(localStorage.getItem('token'));\n\n  useEffect(() => {\n    if (token) {\n      verifyToken();\n    }\n  }, [token]);\n\n  const verifyToken = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/auth/me`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setUser(response.data);\n      setCurrentView('main');\n    } catch (error) {\n      if (error.code === 'NETWORK_ERROR' || !error.response) {\n        showError(ERROR_CODES.NETWORK_ERROR);\n      } else {\n        localStorage.removeItem('token');\n        setToken(null);\n      }\n    }\n  };\n\n  const handleLogin = (userData, authToken) => {\n    setUser(userData);\n    setToken(authToken);\n    localStorage.setItem('token', authToken);\n    setCurrentView('main');\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('token');\n    setCurrentView('login');\n  };\n\n  // Функция для показа ошибок\n  const showError = (errorInfo) => {\n    alert(`Ошибка ${errorInfo.code}: ${errorInfo.message}`);\n  };\n\n  return (\n    <div className=\"App\">\n      {currentView === 'login' && (\n        <LoginView onLogin={handleLogin} showError={showError} />\n      )}\n      {currentView === 'main' && user && (\n        <MainView user={user} onLogout={handleLogout} showError={showError} />\n      )}\n    </div>\n  );\n}\n\n// Компонент авторизации\nfunction LoginView({ onLogin, showError }) {\n  const [formData, setFormData] = useState({\n    badge_id: '',\n    password: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await axios.post(`${API_BASE_URL}/auth/login`, formData);\n      onLogin(response.data.user, response.data.access_token);\n    } catch (error) {\n      console.error('Login error:', error);\n      \n      if (error.code === 'NETWORK_ERROR' || error.response?.status >= 500) {\n        showError(ERROR_CODES.NETWORK_ERROR);\n        setError('Бэкенд недоступен. Проверьте подключение к серверу.');\n      } else {\n        showError(ERROR_CODES.AUTH_ERROR);\n        setError('Ошибка авторизации. Проверьте badge_id и пароль.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleQuickLogin = async (badgeId) => {\n    setLoading(true);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/auth/login`, {\n        badge_id: badgeId,\n        password: badgeId === 'admin' ? 'admin' : 'password'\n      });\n      onLogin(response.data.user, response.data.access_token);\n    } catch (error) {\n      if (error.code === 'NETWORK_ERROR' || error.response?.status >= 500) {\n        showError(ERROR_CODES.NETWORK_ERROR);\n      } else {\n        showError(ERROR_CODES.AUTH_ERROR);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-form\">\n        <h2>Авторизация оператора</h2>\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>Badge ID:</label>\n            <input\n              type=\"text\"\n              name=\"badge_id\"\n              value={formData.badge_id}\n              onChange={handleChange}\n              required\n              disabled={loading}\n              placeholder=\"demo или admin\"\n            />\n          </div>\n          <div className=\"form-group\">\n            <label>Пароль:</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n              disabled={loading}\n              placeholder=\"password\"\n            />\n          </div>\n          {error && <div className=\"error-message\">{error}</div>}\n          <button type=\"submit\" disabled={loading}>\n            {loading ? 'Вход...' : 'Войти'}\n          </button>\n        </form>\n\n        <div className=\"quick-login-buttons\">\n          <p style={{textAlign: 'center', margin: '1rem 0', color: '#666'}}>Быстрый вход:</p>\n          <button \n            onClick={() => handleQuickLogin('demo')}\n            disabled={loading}\n            className=\"quick-login-btn demo-btn\"\n          >\n            Демо пользователь\n          </button>\n\n          <button \n            onClick={() => handleQuickLogin('admin')}\n            disabled={loading}\n            className=\"quick-login-btn admin-btn\"\n          >\n            Администратор\n          </button>\n        </div>\n\n        <div className=\"demo-info\">\n          <p><strong>Данные для входа:</strong></p>\n          <p>• Демо: badge_id = demo, пароль = password</p>\n          <p>• Админ: badge_id = admin, пароль = admin</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Главный компонент работы с инструментами\nfunction MainView({ user, onLogout, showError }) {\n  const [engineer, setEngineer] = useState('');\n  const [operationType, setOperationType] = useState('checkout');\n  const [operationDate, setOperationDate] = useState('');\n  const [tools, setTools] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [sessionId, setSessionId] = useState(null);\n  const [uploadedImage, setUploadedImage] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [isCameraOn, setIsCameraOn] = useState(false);\n  const [detectionResult, setDetectionResult] = useState(null);\n\n  // Устанавливаем текущую дату по умолчанию\n  useEffect(() => {\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000)\n      .toISOString()\n      .slice(0, 16);\n    setOperationDate(localDateTime);\n  }, []);\n\n  // Функция загрузки изображения\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Проверка типа файла\n    if (!file.type.match('image.*')) {\n      showError('Пожалуйста, выберите файл изображения (JPG, PNG, WebP)');\n      return;\n    }\n\n    // Проверка размера файла (максимум 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      showError('Размер файла не должен превышать 10MB');\n      return;\n    }\n\n    const reader = new FileReader();\n    \n    reader.onload = (e) => {\n      try {\n        // Проверяем валидность изображения\n        const img = new Image();\n        img.onload = () => {\n          const base64Data = e.target.result.split(',')[1];\n          setUploadedImage({\n            base64: base64Data,\n            preview: e.target.result,\n            width: img.width,\n            height: img.height\n          });\n          setDetectionResult(null); // Сбрасываем предыдущие результаты\n          console.log('Изображение успешно загружено:', {\n            width: img.width,\n            height: img.height,\n            size: file.size\n          });\n        };\n        \n        img.onerror = () => {\n          throw new Error('Ошибка загрузки изображения');\n        };\n        \n        img.src = e.target.result;\n        \n      } catch (error) {\n        console.error('Ошибка обработки изображения:', error);\n        showError('Ошибка обработки изображения');\n      }\n    };\n    \n    reader.onerror = () => {\n      showError('Ошибка чтения файла');\n    };\n    \n    reader.readAsDataURL(file);\n  };\n\n  // Функция распознавания инструментов на изображении\n  const performDetection = async (imageData) => {\n    if (!imageData) {\n      showError('Сначала загрузите изображение');\n      return;\n    }\n\n    setLoading(true);\n    setDetectionResult(null);\n\n    try {\n      const response = await axios.post(`${API_BASE_URL}/ml/detect`, {\n        image_base64: imageData.base64 || imageData,\n        confidence_threshold: 0.7\n      });\n      \n      if (response.data.success) {\n        const detectedTools = response.data.results.detected_tools || [];\n        const toolsWithIds = detectedTools.map((tool, index) => ({\n          id: index,\n          class_name: tool.class_name,\n          confidence: tool.confidence,\n          detected_quantity: tool.detected_quantity,\n          manual_quantity: tool.detected_quantity || 1,\n          is_manual_edit: false\n        }));\n        \n        setTools(toolsWithIds);\n        setDetectionResult({\n          success: true,\n          count: detectedTools.length,\n          message: `Успешно распознано ${detectedTools.length} инструментов`\n        });\n        \n        showSuccess(`Обнаружено ${detectedTools.length} инструментов!`);\n      } else {\n        throw new Error('Распознавание не удалось');\n      }\n      \n    } catch (error) {\n      console.error('Ошибка детекции:', error);\n      showError(ERROR_CODES.DETECTION_ERROR);\n      setTools([]);\n      setDetectionResult({\n        success: false,\n        count: 0,\n        message: 'Не удалось распознать инструменты на изображении'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Работа с камерой\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' }, audio: false });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await videoRef.current.play();\n        setIsCameraOn(true);\n      }\n    } catch (e) {\n      console.error('Camera error:', e);\n      showError(ERROR_CODES.CAMERA_ERROR);\n    }\n  };\n\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      const tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(t => t.stop());\n      videoRef.current.srcObject = null;\n      setIsCameraOn(false);\n    }\n  };\n\n  const capturePhoto = () => {\n    if (!videoRef.current) return;\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n    const dataUrl = canvas.toDataURL('image/jpeg');\n    const base64Data = dataUrl.split(',')[1];\n    setUploadedImage({ base64: base64Data, preview: dataUrl, width: canvas.width, height: canvas.height });\n    setDetectionResult(null);\n  };\n\n  // Функция очистки изображения\n  const clearImage = () => {\n    setUploadedImage(null);\n    setDetectionResult(null);\n    setTools([]);\n  };\n\n  // Функция начала операции\n  const startOperation = async () => {\n    if (!engineer.trim()) {\n      showError('Введите ФИО инженера');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const operationData = {\n        engineer_name: engineer,\n        operation_type: operationType,\n        operation_date: operationDate,\n        user_id: user.id\n      };\n\n      const token = localStorage.getItem('token');\n      const headers = token !== 'demo-jwt-token' ? { Authorization: `Bearer ${token}` } : {};\n\n      const response = await axios.post(`${API_BASE_URL}/operations/start`, operationData, { headers });\n      setSessionId(response.data.session_id);\n      \n      showSuccess('Операция начата. Загрузите изображение с инструментами.');\n      \n    } catch (error) {\n      console.error('Ошибка начала операции:', error);\n      showError(ERROR_CODES.OPERATION_START_ERROR);\n      setSessionId(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateToolQuantity = (index, newQuantity) => {\n    const updatedTools = [...tools];\n    updatedTools[index] = {\n      ...updatedTools[index],\n      manual_quantity: Math.max(0, newQuantity),\n      is_manual_edit: true\n    };\n    setTools(updatedTools);\n  };\n\n  const confirmOperation = async () => {\n    if (!sessionId) {\n      showError('Сначала начните операцию');\n      return;\n    }\n\n    if (tools.length === 0) {\n      showError('Добавьте хотя бы один инструмент');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const operationData = {\n        session_id: sessionId,\n        operation_date: operationDate,\n        tools: tools.map(tool => ({\n          tool_id: tool.id,\n          final_quantity: tool.manual_quantity,\n          was_manually_adjusted: tool.is_manual_edit\n        })),\n        image_base64: uploadedImage?.base64 || null\n      };\n\n      const token = localStorage.getItem('token');\n      const headers = token !== 'demo-jwt-token' ? { Authorization: `Bearer ${token}` } : {};\n\n      const response = await axios.post(`${API_BASE_URL}/operations/confirm`, operationData, { headers });\n      \n      alert(`Операция завершена! Обработано ${response.data.total_tools} инструментов`);\n      resetOperation();\n      \n    } catch (error) {\n      console.error('Ошибка подтверждения операции:', error);\n      showError(ERROR_CODES.OPERATION_CONFIRM_ERROR);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetOperation = () => {\n    setEngineer('');\n    setTools([]);\n    setSessionId(null);\n    setUploadedImage(null);\n    setDetectionResult(null);\n    \n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000)\n      .toISOString()\n      .slice(0, 16);\n    setOperationDate(localDateTime);\n  };\n\n  // Вспомогательная функция для показа успешных сообщений\n  const showSuccess = (message) => {\n    alert(`✅ ${message}`);\n  };\n\n  return (\n    <div className=\"main-container\">\n      <header className=\"header\">\n        <h1>Учет инструментов</h1>\n        <div className=\"user-info\">\n          <span>Оператор: {user.full_name}</span>\n          {user.is_superuser && <span className=\"admin-badge\">ADMIN</span>}\n          <button onClick={onLogout}>Выйти</button>\n        </div>\n      </header>\n\n      <div className=\"operation-panel\">\n        <div className=\"input-section\">\n          <div className=\"form-group\">\n            <label>ФИО инженера:</label>\n            <input\n              type=\"text\"\n              value={engineer}\n              onChange={(e) => setEngineer(e.target.value)}\n              placeholder=\"Введите фамилию, имя, отчество\"\n              disabled={loading}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Тип операции:</label>\n            <select\n              value={operationType}\n              onChange={(e) => setOperationType(e.target.value)}\n              disabled={loading}\n            >\n              <option value=\"checkout\">Выдача инструментов</option>\n              <option value=\"checkin\">Прием инструментов</option>\n            </select>\n          </div>\n\n          <div className=\"form-group\">\n            <label>Дата и время операции:</label>\n            <input\n              type=\"datetime-local\"\n              value={operationDate}\n              onChange={(e) => setOperationDate(e.target.value)}\n              disabled={loading}\n            />\n          </div>\n\n          <div className=\"action-buttons\">\n            <button \n              onClick={startOperation}\n              disabled={!engineer.trim() || loading}\n              className=\"scan-button\"\n            >\n              {loading ? 'Подготовка...' : 'Начать операцию'}\n            </button>\n            \n            {tools.length > 0 && (\n              <button \n                onClick={confirmOperation}\n                disabled={loading}\n                className=\"confirm-button\"\n              >\n                {loading ? 'Сохранение...' : 'Подтвердить операцию'}\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Секция работы с изображениями */}\n        <div className=\"image-section\">\n          <h3>Работа с изображениями</h3>\n          \n          <div className=\"image-controls\">\n            <div className=\"camera-area\">\n              <div className=\"camera-controls\">\n                {!isCameraOn ? (\n                  <button onClick={startCamera} disabled={loading || !sessionId} className=\"camera-button\">🎥 Включить камеру</button>\n                ) : (\n                  <button onClick={stopCamera} disabled={loading} className=\"camera-button stop\">🛑 Выключить камеру</button>\n                )}\n                <button onClick={capturePhoto} disabled={!isCameraOn || loading} className=\"capture-button\">📸 Снимок</button>\n              </div>\n              <div className=\"camera-preview\">\n                <video ref={videoRef} style={{ width: '100%', maxWidth: 480, background: '#000' }} muted playsInline />\n                <canvas ref={canvasRef} style={{ display: 'none' }} />\n              </div>\n            </div>\n\n            <div className=\"file-upload-area\">\n              <input\n                id=\"image-upload\"\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleImageUpload}\n                style={{ display: 'none' }}\n                disabled={loading || !sessionId}\n              />\n              <label htmlFor=\"image-upload\" className=\"upload-button\">\n                {loading ? '⏳ Загрузка...' : '📁 Выбрать изображение'}\n              </label>\n              \n              <div className=\"upload-info\">\n                <p>Поддерживаемые форматы: JPG, PNG, WebP</p>\n                <p>Максимальный размер: 10MB</p>\n                {!sessionId && <p className=\"warning\">Сначала начните операцию</p>}\n              </div>\n            </div>\n\n            {uploadedImage && (\n              <div className=\"image-preview-controls\">\n                <button \n                  onClick={() => performDetection(uploadedImage)} \n                  disabled={loading} \n                  className=\"detect-button\"\n                >\n                  {loading ? '🔍 Распознавание...' : '📸 Распознать инструменты'}\n                </button>\n                \n                <button \n                  onClick={clearImage}\n                  disabled={loading}\n                  className=\"clear-button\"\n                >\n                  ❌ Очистить\n                </button>\n              </div>\n            )}\n          </div>\n\n          {uploadedImage && (\n            <div className=\"image-preview-container\">\n              <h4>Предпросмотр изображения:</h4>\n              <div className=\"image-preview\">\n                <img \n                  src={uploadedImage.preview} \n                  alt=\"Загруженное изображение для распознавания\"\n                  className=\"preview-image\"\n                />\n                <div className=\"image-overlay\">\n                  <div className=\"scan-frame\"></div>\n                  <p>Изображение готово к распознаванию</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {detectionResult && (\n            <div className=\"detection-result\">\n              <h4>Результат распознавания:</h4>\n              <p>Найдено инструментов: {detectionResult.count || 0}</p>\n              {detectionResult.message && (\n                <p className={`result-message ${detectionResult.success ? 'success' : 'error'}`}>\n                  {detectionResult.message}\n                </p>\n              )}\n            </div>\n          )}\n        </div>\n\n        {tools.length > 0 && (\n          <div className=\"tools-section\">\n            <h3>Распознанные инструменты:</h3>\n            <div className=\"tools-list\">\n              {tools.map((tool, index) => (\n                <ToolItem\n                  key={index}\n                  tool={tool}\n                  index={index}\n                  onQuantityChange={updateToolQuantity}\n                  operationType={operationType}\n                />\n              ))}\n            </div>\n            \n            <div className=\"operation-summary\">\n              <p><strong>Итого инструментов:</strong> {tools.reduce((sum, tool) => sum + tool.manual_quantity, 0)}</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Компонент инструмента\nfunction ToolItem({ tool, index, onQuantityChange, operationType }) {\n  const [localQuantity, setLocalQuantity] = useState(tool.manual_quantity);\n\n  const handleQuantityChange = (newQuantity) => {\n    setLocalQuantity(newQuantity);\n    onQuantityChange(index, newQuantity);\n  };\n\n  return (\n    <div className={`tool-item ${tool.is_manual_edit ? 'manual-edit' : ''}`}>\n      <div className=\"tool-info\">\n        <span className=\"tool-name\">{tool.class_name}</span>\n        {tool.confidence && (\n          <span className=\"confidence\">{Math.round(tool.confidence * 100)}%</span>\n        )}\n      </div>\n      \n      <div className=\"quantity-controls\">\n        <button onClick={() => handleQuantityChange(localQuantity - 1)}>-</button>\n        <input\n          type=\"number\"\n          value={localQuantity}\n          onChange={(e) => handleQuantityChange(parseInt(e.target.value) || 0)}\n          min=\"0\"\n        />\n        <button onClick={() => handleQuantityChange(localQuantity + 1)}>+</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}