{"ast":null,"code":"var _jsxFileName = \"/data/vscode/HacatonAeroflot/Aeroflot-project/app/warehouse-frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MainView({\n  user,\n  onLogout\n}) {\n  _s();\n  const [engineer, setEngineer] = useState('');\n  const [operationType, setOperationType] = useState('checkout');\n  const [operationDate, setOperationDate] = useState('');\n  const [tools, setTools] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [scanning, setScanning] = useState(false);\n  const [sessionId, setSessionId] = useState(null);\n  const [uploadedImage, setUploadedImage] = useState(null);\n\n  // Состояния для камеры\n  const [cameraActive, setCameraActive] = useState(false);\n  const [videoRef, setVideoRef] = useState(null);\n  const [stream, setStream] = useState(null);\n\n  // Устанавливаем текущую дату по умолчанию при загрузке\n  useEffect(() => {\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);\n    setOperationDate(localDateTime);\n  }, []);\n\n  // Активация камеры\n  const startCamera = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: 1280,\n          height: 720\n        }\n      });\n      setStream(mediaStream);\n      if (videoRef) {\n        videoRef.srcObject = mediaStream;\n      }\n      setCameraActive(true);\n    } catch (error) {\n      console.error('Ошибка доступа к камере:', error);\n      alert('Не удалось получить доступ к камере');\n    }\n  };\n\n  // Остановка камеры\n  const stopCamera = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n    setCameraActive(false);\n  };\n\n  // Захват кадра и отправка на бэкенд для распознавания\n  const captureAndDetect = async () => {\n    if (!videoRef || !cameraActive) return;\n    const canvas = document.createElement('canvas');\n    canvas.width = videoRef.videoWidth;\n    canvas.height = videoRef.videoHeight;\n    const ctx = canvas.getContext('2d');\n\n    // Рисуем текущий кадр с видео\n    ctx.drawImage(videoRef, 0, 0);\n\n    // Конвертируем в base64\n    const imageBase64 = canvas.toDataURL('image/jpeg').split(',')[1];\n    setUploadedImage(imageBase64); // Сохраняем для подтверждения операции\n\n    try {\n      setLoading(true);\n      const response = await axios.post(`${API_BASE_URL}/ml/detect`, {\n        image_base64: imageBase64,\n        confidence_threshold: 0.7\n      });\n      if (response.data.success) {\n        const detectedTools = response.data.results.detected_tools || [];\n        setTools(detectedTools.map((tool, index) => ({\n          id: index,\n          class_name: tool.class_name,\n          confidence: tool.confidence,\n          detected_quantity: tool.detected_quantity,\n          manual_quantity: tool.detected_quantity || 0,\n          is_manual_edit: false\n        })));\n        alert(`Обнаружено ${detectedTools.length} инструментов!`);\n      }\n    } catch (error) {\n      console.error('Ошибка детекции:', error);\n      // Fallback к демо-данным при ошибке\n      const demoTools = [{\n        id: 1,\n        class_name: \"Молоток\",\n        confidence: 95.5,\n        detected_quantity: 1\n      }, {\n        id: 2,\n        class_name: \"Отвертка крестовая\",\n        confidence: 87.3,\n        detected_quantity: 2\n      }, {\n        id: 3,\n        class_name: \"Гаечный ключ\",\n        confidence: 92.1,\n        detected_quantity: 3\n      }, {\n        id: 4,\n        class_name: \"Плоскогубцы\",\n        confidence: 78.9,\n        detected_quantity: 1\n      }];\n      setTools(demoTools.map(tool => ({\n        ...tool,\n        manual_quantity: tool.detected_quantity || 0,\n        is_manual_edit: false\n      })));\n      alert('Используются демо-данные (ML сервис недоступен)');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleImageUpload = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const base64 = e.target.result.split(',')[1];\n        setUploadedImage(base64);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const startScanning = async () => {\n    if (!engineer.trim()) {\n      alert('Введите ФИО инженера');\n      return;\n    }\n    if (!operationDate) {\n      alert('Выберите дату и время операции');\n      return;\n    }\n    setScanning(true);\n    setLoading(true);\n    try {\n      // Начинаем новую операцию\n      const operationData = {\n        engineer_name: engineer,\n        operation_type: operationType,\n        operation_date: operationDate,\n        user_id: user.id\n      };\n      const response = await axios.post(`${API_BASE_URL}/operations/start`, operationData, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setSessionId(response.data.session_id);\n\n      // Включаем камеру для сканирования\n      await startCamera();\n    } catch (error) {\n      console.error('Ошибка начала операции:', error);\n      // Fallback для демо-режима\n      setSessionId('demo-session-' + Date.now());\n      await startCamera();\n    } finally {\n      setScanning(false);\n      setLoading(false);\n    }\n  };\n  const updateToolQuantity = (index, newQuantity) => {\n    const updatedTools = [...tools];\n    updatedTools[index] = {\n      ...updatedTools[index],\n      manual_quantity: Math.max(0, newQuantity),\n      is_manual_edit: true\n    };\n    setTools(updatedTools);\n  };\n  const confirmOperation = async () => {\n    if (!sessionId) return;\n    setLoading(true);\n    try {\n      let finalImageBase64 = uploadedImage;\n\n      // Если нет загруженного изображения, но камера активна - захватываем кадр\n      if (!finalImageBase64 && videoRef && cameraActive) {\n        const canvas = document.createElement('canvas');\n        canvas.width = videoRef.videoWidth;\n        canvas.height = videoRef.videoHeight;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(videoRef, 0, 0);\n        finalImageBase64 = canvas.toDataURL('image/jpeg').split(',')[1];\n      }\n      const operationData = {\n        session_id: sessionId,\n        operation_date: operationDate,\n        tools: tools.map(tool => ({\n          tool_id: tool.id,\n          final_quantity: tool.manual_quantity,\n          was_manually_adjusted: tool.is_manual_edit\n        })),\n        image_base64: finalImageBase64\n      };\n      const response = await axios.post(`${API_BASE_URL}/operations/confirm`, operationData);\n\n      // Выключаем камеру после операции\n      stopCamera();\n\n      // Показываем результаты ML если использовались\n      if (response.data.ml_used) {\n        alert(`ML обнаружено ${response.data.total_tools} инструментов! Совпадение: ${response.data.match_percentage}%`);\n      } else {\n        alert(`Операция успешно завершена! Обработано ${response.data.total_tools} инструментов`);\n      }\n      resetOperation();\n    } catch (error) {\n      console.error('Ошибка подтверждения операции:', error);\n      alert('Ошибка при завершении операции');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetOperation = () => {\n    setEngineer('');\n    setTools([]);\n    setSessionId(null);\n    setScanning(false);\n    setUploadedImage(null);\n    stopCamera();\n\n    // Сбрасываем дату на текущую\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);\n    setOperationDate(localDateTime);\n  };\n  const formatDateTime = dateTimeString => {\n    const date = new Date(dateTimeString);\n    return date.toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0423\\u0447\\u0435\\u0442 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440: \", user.full_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), user.is_superuser && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"admin-badge\",\n          children: \"ADMIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"operation-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0424\\u0418\\u041E \\u0438\\u043D\\u0436\\u0435\\u043D\\u0435\\u0440\\u0430:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: engineer,\n            onChange: e => setEngineer(e.target.value),\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044E, \\u0438\\u043C\\u044F, \\u043E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\",\n            disabled: scanning || loading || cameraActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0422\\u0438\\u043F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: operationType,\n            onChange: e => setOperationType(e.target.value),\n            disabled: scanning || loading || cameraActive,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"checkout\",\n              children: \"\\u0412\\u044B\\u0434\\u0430\\u043B \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"checkin\",\n              children: \"\\u041F\\u0440\\u0438\\u043D\\u044F\\u043B \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430 \\u0438 \\u0432\\u0440\\u0435\\u043C\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            value: operationDate,\n            onChange: e => setOperationDate(e.target.value),\n            disabled: scanning || loading || cameraActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            className: \"date-hint\",\n            children: [\"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F: \", formatDateTime(new Date())]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startScanning,\n            disabled: !engineer.trim() || !operationDate || scanning || loading || cameraActive,\n            className: \"scan-button\",\n            children: scanning ? 'Подготовка...' : 'Начать операцию'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), tools.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: confirmOperation,\n            disabled: loading,\n            className: \"confirm-button\",\n            children: loading ? 'Сохранение...' : 'Подтвердить операцию'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"camera-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430 \\u0441 \\u043A\\u0430\\u043C\\u0435\\u0440\\u043E\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"camera-controls\",\n          children: !cameraActive ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startCamera,\n            disabled: !sessionId,\n            className: \"camera-button\",\n            children: \"\\uD83D\\uDCF7 \\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043A\\u0430\\u043C\\u0435\\u0440\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: stopCamera,\n              className: \"camera-button stop\",\n              children: \"\\u23F9\\uFE0F \\u0412\\u044B\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043A\\u0430\\u043C\\u0435\\u0440\\u0443\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: captureAndDetect,\n              disabled: loading,\n              className: \"camera-button capture\",\n              children: loading ? '🔍 Распознавание...' : '📸 Распознать инструменты'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-upload\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image-upload\",\n                className: \"upload-button\",\n                children: \"\\uD83D\\uDCC1 \\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"image-upload\",\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleImageUpload,\n                style: {\n                  display: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: setVideoRef,\n            autoPlay: true,\n            playsInline: true,\n            muted: true,\n            className: \"camera-video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"camera-overlay\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scan-frame\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u041D\\u0430\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u0430\\u043C\\u0435\\u0440\\u0443 \\u043D\\u0430 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), uploadedImage && !cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"uploaded-image-preview\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCF7 \\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u0438 \\u0433\\u043E\\u0442\\u043E\\u0432\\u043E \\u043A \\u0440\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u0432\\u0430\\u043D\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: captureAndDetect,\n            disabled: loading,\n            className: \"camera-button capture\",\n            children: loading ? '🔍 Распознавание...' : '📸 Распознать инструменты'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), scanning && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scanning-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"scanning-animation\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scanner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u041F\\u043E\\u0434\\u0433\\u043E\\u0442\\u043E\\u0432\\u043A\\u0430 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }, this), tools.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tools-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"operation-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\u0414\\u0435\\u0442\\u0430\\u043B\\u0438 \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0418\\u043D\\u0436\\u0435\\u043D\\u0435\\u0440:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 18\n            }, this), \" \", engineer]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0422\\u0438\\u043F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 18\n            }, this), \" \", operationType === 'checkout' ? 'Выдача' : 'Прием']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0414\\u0430\\u0442\\u0430 \\u0438 \\u0432\\u0440\\u0435\\u043C\\u044F:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 18\n            }, this), \" \", formatDateTime(operationDate)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0421\\u0435\\u0441\\u0441\\u0438\\u044F:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 18\n            }, this), \" \", sessionId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tools-list\",\n          children: tools.map((tool, index) => /*#__PURE__*/_jsxDEV(ToolItem, {\n            tool: tool,\n            index: index,\n            onQuantityChange: updateToolQuantity,\n            operationType: operationType\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"operation-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0418\\u0442\\u043E\\u0433\\u043E \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 18\n            }, this), \" \", tools.reduce((sum, tool) => sum + tool.manual_quantity, 0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u041E\\u0431\\u043D\\u0430\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E ML:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 18\n            }, this), \" \", tools.reduce((sum, tool) => sum + (tool.detected_quantity || 0), 0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 5\n  }, this);\n}\n\n// Компонент отдельного инструмента (остается без изменений)\n_s(MainView, \"/sEVmXahWJYUZCKuAn23rmjLPKk=\");\n_c = MainView;\nfunction ToolItem({\n  tool,\n  index,\n  onQuantityChange,\n  operationType\n}) {\n  _s2();\n  const [localQuantity, setLocalQuantity] = useState(tool.manual_quantity);\n  const handleQuantityChange = newQuantity => {\n    setLocalQuantity(newQuantity);\n    onQuantityChange(index, newQuantity);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `tool-item ${tool.is_manual_edit ? 'manual-edit' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tool-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tool-name\",\n        children: tool.class_name || tool.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), tool.confidence && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"confidence\",\n        children: [\"\\u0422\\u043E\\u0447\\u043D\\u043E\\u0441\\u0442\\u044C: \", tool.confidence.toFixed(1), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quantity-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleQuantityChange(localQuantity - 1),\n        disabled: localQuantity <= 0,\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: localQuantity,\n        onChange: e => handleQuantityChange(parseInt(e.target.value) || 0),\n        min: \"0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleQuantityChange(localQuantity + 1),\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"operation-indicator\",\n      children: operationType === 'checkout' ? '📤 Выдача' : '📥 Прием'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 446,\n    columnNumber: 5\n  }, this);\n}\n_s2(ToolItem, \"pmtMWu6NQMMDsG4BcDheOZ8pJm0=\");\n_c2 = ToolItem;\nvar _c, _c2;\n$RefreshReg$(_c, \"MainView\");\n$RefreshReg$(_c2, \"ToolItem\");","map":{"version":3,"names":["MainView","user","onLogout","_s","engineer","setEngineer","useState","operationType","setOperationType","operationDate","setOperationDate","tools","setTools","loading","setLoading","scanning","setScanning","sessionId","setSessionId","uploadedImage","setUploadedImage","cameraActive","setCameraActive","videoRef","setVideoRef","stream","setStream","useEffect","now","Date","localDateTime","getTime","getTimezoneOffset","toISOString","slice","startCamera","mediaStream","navigator","mediaDevices","getUserMedia","video","width","height","srcObject","error","console","alert","stopCamera","getTracks","forEach","track","stop","captureAndDetect","canvas","document","createElement","videoWidth","videoHeight","ctx","getContext","drawImage","imageBase64","toDataURL","split","response","axios","post","API_BASE_URL","image_base64","confidence_threshold","data","success","detectedTools","results","detected_tools","map","tool","index","id","class_name","confidence","detected_quantity","manual_quantity","is_manual_edit","length","demoTools","handleImageUpload","event","file","target","files","reader","FileReader","onload","e","base64","result","readAsDataURL","startScanning","trim","operationData","engineer_name","operation_type","operation_date","user_id","headers","Authorization","localStorage","getItem","session_id","updateToolQuantity","newQuantity","updatedTools","Math","max","confirmOperation","finalImageBase64","tool_id","final_quantity","was_manually_adjusted","ml_used","total_tools","match_percentage","resetOperation","formatDateTime","dateTimeString","date","toLocaleString","day","month","year","hour","minute","_jsxDEV","className","children","fileName","_jsxFileName","lineNumber","columnNumber","full_name","is_superuser","onClick","type","value","onChange","placeholder","disabled","_Fragment","htmlFor","accept","style","display","ref","autoPlay","playsInline","muted","ToolItem","onQuantityChange","reduce","sum","_c","_s2","localQuantity","setLocalQuantity","handleQuantityChange","name","toFixed","parseInt","min","_c2","$RefreshReg$"],"sources":["/data/vscode/HacatonAeroflot/Aeroflot-project/app/warehouse-frontend/src/App.js"],"sourcesContent":["function MainView({ user, onLogout }) {\n  const [engineer, setEngineer] = useState('');\n  const [operationType, setOperationType] = useState('checkout');\n  const [operationDate, setOperationDate] = useState('');\n  const [tools, setTools] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [scanning, setScanning] = useState(false);\n  const [sessionId, setSessionId] = useState(null);\n  const [uploadedImage, setUploadedImage] = useState(null);\n  \n  // Состояния для камеры\n  const [cameraActive, setCameraActive] = useState(false);\n  const [videoRef, setVideoRef] = useState(null);\n  const [stream, setStream] = useState(null);\n\n  // Устанавливаем текущую дату по умолчанию при загрузке\n  useEffect(() => {\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000)\n      .toISOString()\n      .slice(0, 16);\n    setOperationDate(localDateTime);\n  }, []);\n\n  // Активация камеры\n  const startCamera = async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({ \n        video: { width: 1280, height: 720 } \n      });\n      setStream(mediaStream);\n      if (videoRef) {\n        videoRef.srcObject = mediaStream;\n      }\n      setCameraActive(true);\n    } catch (error) {\n      console.error('Ошибка доступа к камере:', error);\n      alert('Не удалось получить доступ к камере');\n    }\n  };\n\n  // Остановка камеры\n  const stopCamera = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n    setCameraActive(false);\n  };\n\n  // Захват кадра и отправка на бэкенд для распознавания\n  const captureAndDetect = async () => {\n    if (!videoRef || !cameraActive) return;\n\n    const canvas = document.createElement('canvas');\n    canvas.width = videoRef.videoWidth;\n    canvas.height = videoRef.videoHeight;\n    const ctx = canvas.getContext('2d');\n    \n    // Рисуем текущий кадр с видео\n    ctx.drawImage(videoRef, 0, 0);\n    \n    // Конвертируем в base64\n    const imageBase64 = canvas.toDataURL('image/jpeg').split(',')[1];\n    setUploadedImage(imageBase64); // Сохраняем для подтверждения операции\n    \n    try {\n      setLoading(true);\n      const response = await axios.post(`${API_BASE_URL}/ml/detect`, {\n        image_base64: imageBase64,\n        confidence_threshold: 0.7\n      });\n      \n      if (response.data.success) {\n        const detectedTools = response.data.results.detected_tools || [];\n        setTools(detectedTools.map((tool, index) => ({\n          id: index,\n          class_name: tool.class_name,\n          confidence: tool.confidence,\n          detected_quantity: tool.detected_quantity,\n          manual_quantity: tool.detected_quantity || 0,\n          is_manual_edit: false\n        })));\n        \n        alert(`Обнаружено ${detectedTools.length} инструментов!`);\n      }\n    } catch (error) {\n      console.error('Ошибка детекции:', error);\n      // Fallback к демо-данным при ошибке\n      const demoTools = [\n        { id: 1, class_name: \"Молоток\", confidence: 95.5, detected_quantity: 1 },\n        { id: 2, class_name: \"Отвертка крестовая\", confidence: 87.3, detected_quantity: 2 },\n        { id: 3, class_name: \"Гаечный ключ\", confidence: 92.1, detected_quantity: 3 },\n        { id: 4, class_name: \"Плоскогубцы\", confidence: 78.9, detected_quantity: 1 }\n      ];\n      \n      setTools(demoTools.map(tool => ({\n        ...tool,\n        manual_quantity: tool.detected_quantity || 0,\n        is_manual_edit: false\n      })));\n      \n      alert('Используются демо-данные (ML сервис недоступен)');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const base64 = e.target.result.split(',')[1];\n        setUploadedImage(base64);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const startScanning = async () => {\n    if (!engineer.trim()) {\n      alert('Введите ФИО инженера');\n      return;\n    }\n\n    if (!operationDate) {\n      alert('Выберите дату и время операции');\n      return;\n    }\n\n    setScanning(true);\n    setLoading(true);\n\n    try {\n      // Начинаем новую операцию\n      const operationData = {\n        engineer_name: engineer,\n        operation_type: operationType,\n        operation_date: operationDate,\n        user_id: user.id\n      };\n\n      const response = await axios.post(`${API_BASE_URL}/operations/start`, operationData, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n\n      setSessionId(response.data.session_id);\n      \n      // Включаем камеру для сканирования\n      await startCamera();\n      \n    } catch (error) {\n      console.error('Ошибка начала операции:', error);\n      // Fallback для демо-режима\n      setSessionId('demo-session-' + Date.now());\n      await startCamera();\n    } finally {\n      setScanning(false);\n      setLoading(false);\n    }\n  };\n\n  const updateToolQuantity = (index, newQuantity) => {\n    const updatedTools = [...tools];\n    updatedTools[index] = {\n      ...updatedTools[index],\n      manual_quantity: Math.max(0, newQuantity),\n      is_manual_edit: true\n    };\n    setTools(updatedTools);\n  };\n\n  const confirmOperation = async () => {\n    if (!sessionId) return;\n\n    setLoading(true);\n    try {\n      let finalImageBase64 = uploadedImage;\n      \n      // Если нет загруженного изображения, но камера активна - захватываем кадр\n      if (!finalImageBase64 && videoRef && cameraActive) {\n        const canvas = document.createElement('canvas');\n        canvas.width = videoRef.videoWidth;\n        canvas.height = videoRef.videoHeight;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(videoRef, 0, 0);\n        finalImageBase64 = canvas.toDataURL('image/jpeg').split(',')[1];\n      }\n\n      const operationData = {\n        session_id: sessionId,\n        operation_date: operationDate,\n        tools: tools.map(tool => ({\n          tool_id: tool.id,\n          final_quantity: tool.manual_quantity,\n          was_manually_adjusted: tool.is_manual_edit\n        })),\n        image_base64: finalImageBase64\n      };\n\n      const response = await axios.post(`${API_BASE_URL}/operations/confirm`, operationData);\n      \n      // Выключаем камеру после операции\n      stopCamera();\n      \n      // Показываем результаты ML если использовались\n      if (response.data.ml_used) {\n        alert(`ML обнаружено ${response.data.total_tools} инструментов! Совпадение: ${response.data.match_percentage}%`);\n      } else {\n        alert(`Операция успешно завершена! Обработано ${response.data.total_tools} инструментов`);\n      }\n      \n      resetOperation();\n      \n    } catch (error) {\n      console.error('Ошибка подтверждения операции:', error);\n      alert('Ошибка при завершении операции');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetOperation = () => {\n    setEngineer('');\n    setTools([]);\n    setSessionId(null);\n    setScanning(false);\n    setUploadedImage(null);\n    stopCamera();\n    \n    // Сбрасываем дату на текущую\n    const now = new Date();\n    const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000)\n      .toISOString()\n      .slice(0, 16);\n    setOperationDate(localDateTime);\n  };\n\n  const formatDateTime = (dateTimeString) => {\n    const date = new Date(dateTimeString);\n    return date.toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"main-container\">\n      <header className=\"header\">\n        <h1>Учет инструментов</h1>\n        <div className=\"user-info\">\n          <span>Оператор: {user.full_name}</span>\n          {user.is_superuser && <span className=\"admin-badge\">ADMIN</span>}\n          <button onClick={onLogout}>Выйти</button>\n        </div>\n      </header>\n\n      <div className=\"operation-panel\">\n        <div className=\"input-section\">\n          <div className=\"form-group\">\n            <label>ФИО инженера:</label>\n            <input\n              type=\"text\"\n              value={engineer}\n              onChange={(e) => setEngineer(e.target.value)}\n              placeholder=\"Введите фамилию, имя, отчество\"\n              disabled={scanning || loading || cameraActive}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Тип операции:</label>\n            <select\n              value={operationType}\n              onChange={(e) => setOperationType(e.target.value)}\n              disabled={scanning || loading || cameraActive}\n            >\n              <option value=\"checkout\">Выдал инструменты</option>\n              <option value=\"checkin\">Принял инструменты</option>\n            </select>\n          </div>\n\n          <div className=\"form-group\">\n            <label>Дата и время операции:</label>\n            <input\n              type=\"datetime-local\"\n              value={operationDate}\n              onChange={(e) => setOperationDate(e.target.value)}\n              disabled={scanning || loading || cameraActive}\n            />\n            <small className=\"date-hint\">\n              Текущее время: {formatDateTime(new Date())}\n            </small>\n          </div>\n\n          <div className=\"action-buttons\">\n            <button \n              onClick={startScanning}\n              disabled={!engineer.trim() || !operationDate || scanning || loading || cameraActive}\n              className=\"scan-button\"\n            >\n              {scanning ? 'Подготовка...' : 'Начать операцию'}\n            </button>\n            \n            {tools.length > 0 && (\n              <button \n                onClick={confirmOperation}\n                disabled={loading}\n                className=\"confirm-button\"\n              >\n                {loading ? 'Сохранение...' : 'Подтвердить операцию'}\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Секция работы с камерой */}\n        <div className=\"camera-section\">\n          <h3>Работа с камерой</h3>\n          \n          <div className=\"camera-controls\">\n            {!cameraActive ? (\n              <button \n                onClick={startCamera} \n                disabled={!sessionId}\n                className=\"camera-button\"\n              >\n                📷 Включить камеру\n              </button>\n            ) : (\n              <>\n                <button onClick={stopCamera} className=\"camera-button stop\">\n                  ⏹️ Выключить камеру\n                </button>\n                <button \n                  onClick={captureAndDetect} \n                  disabled={loading} \n                  className=\"camera-button capture\"\n                >\n                  {loading ? '🔍 Распознавание...' : '📸 Распознать инструменты'}\n                </button>\n                \n                <div className=\"file-upload\">\n                  <label htmlFor=\"image-upload\" className=\"upload-button\">\n                    📁 Загрузить изображение\n                  </label>\n                  <input\n                    id=\"image-upload\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleImageUpload}\n                    style={{ display: 'none' }}\n                  />\n                </div>\n              </>\n            )}\n          </div>\n\n          {cameraActive && (\n            <div className=\"video-container\">\n              <video \n                ref={setVideoRef}\n                autoPlay \n                playsInline\n                muted\n                className=\"camera-video\"\n              />\n              <div className=\"camera-overlay\">\n                <div className=\"scan-frame\"></div>\n                <p>Наведите камеру на инструменты</p>\n              </div>\n            </div>\n          )}\n\n          {uploadedImage && !cameraActive && (\n            <div className=\"uploaded-image-preview\">\n              <p>📷 Изображение загружено и готово к распознаванию</p>\n              <button \n                onClick={captureAndDetect} \n                disabled={loading} \n                className=\"camera-button capture\"\n              >\n                {loading ? '🔍 Распознавание...' : '📸 Распознать инструменты'}\n              </button>\n            </div>\n          )}\n        </div>\n\n        {scanning && (\n          <div className=\"scanning-overlay\">\n            <div className=\"scanning-animation\">\n              <div className=\"scanner\"></div>\n              <p>Подготовка операции...</p>\n            </div>\n          </div>\n        )}\n\n        {tools.length > 0 && (\n          <div className=\"tools-section\">\n            <div className=\"operation-info\">\n              <h3>Детали операции:</h3>\n              <p><strong>Инженер:</strong> {engineer}</p>\n              <p><strong>Тип операции:</strong> {operationType === 'checkout' ? 'Выдача' : 'Прием'}</p>\n              <p><strong>Дата и время:</strong> {formatDateTime(operationDate)}</p>\n              <p><strong>Сессия:</strong> {sessionId}</p>\n            </div>\n            \n            <h3>Распознанные инструменты:</h3>\n            <div className=\"tools-list\">\n              {tools.map((tool, index) => (\n                <ToolItem\n                  key={index}\n                  tool={tool}\n                  index={index}\n                  onQuantityChange={updateToolQuantity}\n                  operationType={operationType}\n                />\n              ))}\n            </div>\n            \n            <div className=\"operation-summary\">\n              <p><strong>Итого инструментов:</strong> {tools.reduce((sum, tool) => sum + tool.manual_quantity, 0)}</p>\n              <p><strong>Обнаружено ML:</strong> {tools.reduce((sum, tool) => sum + (tool.detected_quantity || 0), 0)}</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Компонент отдельного инструмента (остается без изменений)\nfunction ToolItem({ tool, index, onQuantityChange, operationType }) {\n  const [localQuantity, setLocalQuantity] = useState(tool.manual_quantity);\n\n  const handleQuantityChange = (newQuantity) => {\n    setLocalQuantity(newQuantity);\n    onQuantityChange(index, newQuantity);\n  };\n\n  return (\n    <div className={`tool-item ${tool.is_manual_edit ? 'manual-edit' : ''}`}>\n      <div className=\"tool-info\">\n        <span className=\"tool-name\">{tool.class_name || tool.name}</span>\n        {tool.confidence && (\n          <span className=\"confidence\">Точность: {tool.confidence.toFixed(1)}%</span>\n        )}\n      </div>\n      \n      <div className=\"quantity-controls\">\n        <button \n          onClick={() => handleQuantityChange(localQuantity - 1)}\n          disabled={localQuantity <= 0}\n        >\n          -\n        </button>\n        \n        <input\n          type=\"number\"\n          value={localQuantity}\n          onChange={(e) => handleQuantityChange(parseInt(e.target.value) || 0)}\n          min=\"0\"\n        />\n        \n        <button onClick={() => handleQuantityChange(localQuantity + 1)}>\n          +\n        </button>\n      </div>\n      \n      <div className=\"operation-indicator\">\n        {operationType === 'checkout' ? '📤 Выдача' : '📥 Прием'}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}